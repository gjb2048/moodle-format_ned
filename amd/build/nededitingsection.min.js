/**
 * NED Format
 *
 * @package    format_ned
 * @subpackage NED
 * @copyright  NED {@link http://ned.ca}
 * @author     NED {@link http://ned.ca}
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @developer  G J Barnard - {@link http://about.me/gjbarnard} and
 *                           {@link http://moodle.org/user/profile.php?id=442195}
 */
/* jshint ignore:start */
define(["jquery","core/log"],function(a,b){return b.debug("NED Format Editing Section AMD"),function(a){"use strict";a.fn.getSection=function(c,d){var e=M.cfg.wwwroot+"/course/format/ned/getsection.php",f=this;b.debug("NED Format Editing Section AMD request url: "+e);var g=a.ajax({url:e,method:"POST",cache:!1,data:{sesskey:M.cfg.sesskey,courseid:c,sectionno:d},dataType:"html"});g.done(function(c){b.debug("NED Format Editing Section AMD request done: "+c),a(f).replaceWith(c)}),g.fail(function(a,c){b.debug("NED Format Editing Section AMD request failed: "+c)})}}(a),{init:function(c){a(document).ready(function(a){window.JSON&&window.JSON.stringify&&b.debug("NED Format Editing Section AMD data: "+JSON.stringify(c)),
//$().getSection(data.courseid, 1);
// Individual toggles.
a("ul.nededitingsection li.section .left .nededitingsectionpix").click(function(d){a(this).hasClass("closed")?a(this).removeClass("closed").addClass("open"):a(this).removeClass("open").addClass("closed"),a(this).parent(".left").parent(".section").find(".content .section").each(function(){
//$(this).html('<div>Me!</div>');
var d=a(this).attr("nedsectionno");void 0!=d?(a(this).getSection(c.courseid,d),
//Y.use("moodle-course-dragdrop", function() {M.course.init_resource_dragdrop({"courseid":"5","ajaxurl":"/course/rest.php","config":{"resourceurl":"/course/rest.php","sectionurl":"/course/rest.php","pageparams":[]}});});
//M.course.init_resource_dragdrop({"courseid":"5","ajaxurl":"/course/rest.php","config":{"resourceurl":"/course/rest.php","sectionurl":"/course/rest.php","pageparams":[]}});
//M.course.init_resource_dragdrop.setup_for_section('.course-content li.section');
//Y.use("moodle-course-dragdrop", function() { M.course.init_resource_dragdrop.setup_for_section('.course-content li.section');});
//log.debug('NED Format Editing Section AMD DD: ' + JSON.stringify(M.course.init_resource_dragdrop));
//log.debug('NED Format Editing Section AMD Y: ' + JSON.stringify(Y));
b.debug("NED Format Editing Section AMD M.cfg: "+JSON.stringify(M.cfg)),b.debug("NED Format Editing Section AMD M.course.init_resource_dragdrop(NY): "+JSON.stringify(M.course.init_resource_dragdrop)),Y.use("moodle-course-dragdrop",function(){b.debug("NED Format Editing Section AMD M.course.init_resource_dragdrop(UY): "+JSON.stringify(M.course.init_resource_dragdrop))}),b.debug("NED Format Editing Section AMD M.format_ned.init: "+JSON.stringify(M.format_ned.init)),M.format_ned.dragdrop()):a(this).toggle()})}),
// All toggles compress.
a("#nededitingsectioncompressed").click(function(){a("ul.nededitingsection li.section").each(function(){a(this).find(".content .section").hide();var b=a(this).find(".left .nededitingsectionpix");a(b).hasClass("open")&&a(b).removeClass("open").addClass("closed")})}),
// All toggles expand.
a("#nededitingsectionexpanded").click(function(){a("ul.nededitingsection li.section").each(function(){a(this).find(".content .section").show();var b=a(this).find(".left .nededitingsectionpix");a(b).hasClass("closed")&&a(b).removeClass("closed").addClass("open")})})}),b.debug("NED Format Editing Section AMD init.")}}});