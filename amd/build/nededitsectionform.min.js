/**
 * NED Format
 *
 * @package    format_ned
 * @subpackage NED
 * @copyright  NED {@link http://ned.ca}
 * @author     NED {@link http://ned.ca}
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @developer  G J Barnard - {@link http://about.me/gjbarnard} and
 *                           {@link http://moodle.org/user/profile.php?id=442195}
 */
/* jshint ignore:start */
define(["jquery","core/log"],function(a,b){return b.debug("NED Format Edit Section Form AMD"),function(a){"use strict";a.fn.sectionHeaderFormat=function(c){var d=c.sectionheaderformatsdata,e=a("#nedshfleftlabel"),f=a("#nedshfmiddlelabel"),g=a("#nedshfrightlabel"),h=a("#id_shfcleftcolumn"),i=a("#id_shfcmiddlecolumn"),j=a("#id_shfcrightcolumn"),k=a("#id_shfvleftcolumn"),l=a("#id_shfvmiddlecolumn"),m=a("#id_shfvrightcolumn"),n=c.defaultstring,o=a("#id_navigationname"),p=a("#sectionnamenavblockvalue"),q=function(q){var r=q.find(":selected").val();b.debug("NED Format Edit Section Form AMD checkSelect chosen: "+r),
// Change the section name labels.
e.html(d[r].leftcolumn.value),f.html(d[r].middlecolumn.value),g.html(d[r].rightcolumn.value),/* For some reason the disabledIf JS does not react to this, however is still
                   needed as the state is changed and the PHP 'update_section_format_options()' in lib.php
                   does see the change and make decisions upon it. */
1==d[r].leftcolumn.active?(h.prop("checked",!0),k.prop("disabled",!1)):(h.prop("checked",!1),k.prop("disabled",!0)),1==d[r].middlecolumn.active?(i.prop("checked",!0),l.prop("disabled",!1)):(i.prop("checked",!1),l.prop("disabled",!0)),1==d[r].rightcolumn.active?(j.prop("checked",!0),m.prop("disabled",!1)):(j.prop("checked",!1),m.prop("disabled",!0)),
// Change the navigation name values.
o.empty(),o.append(a("<option></option>").attr("value","0").text(n)),a.each(d[r].navigationname,function(b,c){o.append(a("<option></option>").attr("value",b).text(c))}),
// Goes back to 'default' so update the text.
p.text(c.sectionnamenavblockvaluedata)};o.on("change",function(b){
// Change the navigation name block value.
var d=a(this).find(":selected").val();switch(d){case"0":p.text(c.sectionnamenavblockvaluedata);break;case"1":p.text(k.val());break;case"2":p.text(l.val());break;case"3":p.text(m.val())}}),k.on("keyup",function(b){"1"==o.find(":selected").val()&&// Left column.
p.text(a(this).val())}),l.on("keyup",function(b){"2"==o.find(":selected").val()&&// Middle column.
p.text(a(this).val())}),m.on("keyup",function(b){"3"==o.find(":selected").val()&&// Right column.
p.text(a(this).val())}),this.on("change",function(b){q(a(this))})}}(a),{init:function(c){a(document).ready(function(a){a("select#id_sectionheaderformat").sectionHeaderFormat(c),window.JSON&&window.JSON.stringify&&b.debug("NED Format Edit Section Form AMD data: "+JSON.stringify(c))}),b.debug("NED Format Edit Section Form AMD init.")}}});