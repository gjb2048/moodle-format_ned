/**
 * NED Format
 *
 * @package    format_ned
 * @subpackage NED
 * @copyright  NED {@link http://ned.ca}
 * @author     NED {@link http://ned.ca}
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 * @developer  G J Barnard - {@link http://about.me/gjbarnard} and
 *                           {@link http://moodle.org/user/profile.php?id=442195}
 */
/* jshint ignore:start */
define(["jquery","core/log"],function(a,b){return b.debug("NED Format Edit Section Form AMD"),function(a){"use strict";var c=a("#id_navigationname"),d=a("#sectionnamenavblockvalue"),e=c.find(":selected").val(),f=a("#id_shfvleftcolumn"),g=a("#id_shfvmiddlecolumn"),h=a("#id_shfvrightcolumn");a.fn.sectionHeaderFormat=function(e){var i=e.sectionheaderformatsdata,j=a("#nedshfleftlabel"),k=a("#nedshfmiddlelabel"),l=a("#nedshfrightlabel"),m=a("#id_shfcleftcolumn"),n=a("#id_shfcmiddlecolumn"),o=a("#id_shfcrightcolumn"),p=e.defaultstring,q=function(q){var r=q.find(":selected").val();b.debug("NED Format Edit Section Form AMD checkSelect chosen: "+r),
// Change the section name labels.
j.html(i[r].leftcolumn.value),k.html(i[r].middlecolumn.value),l.html(i[r].rightcolumn.value),/* For some reason the disabledIf JS does not react to this, however is still
                   needed as the state is changed and the PHP 'update_section_format_options()' in lib.php
                   does see the change and make decisions upon it. */
1==i[r].leftcolumn.active?(m.prop("checked",!0),f.prop("disabled",!1)):(m.prop("checked",!1),f.prop("disabled",!0)),1==i[r].middlecolumn.active?(n.prop("checked",!0),g.prop("disabled",!1)):(n.prop("checked",!1),g.prop("disabled",!0)),1==i[r].rightcolumn.active?(o.prop("checked",!0),h.prop("disabled",!1)):(o.prop("checked",!1),h.prop("disabled",!0)),
// Change the navigation name values.
c.empty(),c.append(a("<option></option>").attr("value","0").text(p)),a.each(i[r].navigationname,function(b,d){c.append(a("<option></option>").attr("value",b).text(d))}),
// Goes back to 'default' so update the text.
d.text(e.sectionnamenavblockvaluedata)};this.on("change",function(b){q(a(this))})},a.fn.navigationNameSelect=function(b){this.on("change",function(c){
// Change the navigation name block value.
var i=a(this).find(":selected").val();switch(i){case"0":d.text(b);break;case"1":d.text(f.val());break;case"2":d.text(g.val());break;case"3":d.text(h.val())}e=i})},f.on("keyup",function(b){"1"==e&&// Left column.
d.text(a(this).val())}),g.on("keyup",function(b){"2"==e&&// Middle column.
d.text(a(this).val())}),h.on("keyup",function(b){"3"==e&&// Right column.
d.text(a(this).val())})}(a),{init:function(c){a(document).ready(function(a){a("select#id_sectionheaderformat").sectionHeaderFormat(c),a("#id_navigationname").navigationNameSelect(c.sectionnamenavblockvaluedata),window.JSON&&window.JSON.stringify&&b.debug("NED Format Edit Section Form AMD data: "+JSON.stringify(c))}),b.debug("NED Format Edit Section Form AMD init.")}}});